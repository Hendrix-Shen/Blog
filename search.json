[{"title":"Hello World","url":"/2023/04/23/1.hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick Start\nCreate a new post\n$ hexo new &quot;My New Post&quot;\nMore info: Writing\nRun server\n$ hexo server\nMore info: Server\nGenerate static files\n$ hexo generate\nMore info: Generating\nDeploy to remote sites\n$ hexo deploy\nMore info: Deployment\n","tags":["hexo"]},{"title":"搭建 Hexo 博客","url":"/2023/05/16/2.deploy-hexo-pages/","content":"部署方案\n此方案需要两个仓库：\n\n源码仓库（私有）：Hexo 配置文件以及写作等 原始内容 均在此操作进行，向此仓库 push 后通过 GitHub Actions 部署，并向页面仓库推送。\n页面仓库（公开）：通过 Hexo 生成的静态文件存储与此，GitHub Pages 检测到仓库更新会自动进行部署。\n\n准备工作\n需要 GitHub 账号一个，一台装有 Git、Nodejs 的电脑，脑子，手。\n安装 hexo-cli (Hexo 主程序)\nnpm install hexo-cli -g\n找到合适的目录作为博客根目录，打开 Git Bash 并运行命令：\n(此过程会执行 git clone操作, 网络环境不良可能需要多次重试)\nhexo init\n当看到 “Start blogging with Hexo!” 时表示 Hexo 已经初始化完成。\n启动 Hexo 本地服务端\nhexo server\n当看到 “Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.” 时表示 Hexo 本地服务端启动完成，其中 http://localhost:4000 为本地监听地址，访问该地址即可预览博客。\n配置博客（WIP）\n编辑 _config.yml 文件。下面提供一个模板（该内容可能过时，具体请参考 Hexo 官方文档）\n# Hexo Configuration## Docs: https://hexo.io/docs/configuration.html## Source: https://github.com/hexojs/hexo/# Sitetitle: Hexosubtitle: &#x27;&#x27;description: &#x27;&#x27;keywords:author: John Doelanguage: entimezone: &#x27;&#x27;# URL## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;url: http://example.compermalink: :year/:month/:day/:title/permalink_defaults:pretty_urls:  trailing_index: true # Set to false to remove trailing &#x27;index.html&#x27; from permalinks  trailing_html: true # Set to false to remove trailing &#x27;.html&#x27; from permalinks# Directorysource_dir: sourcepublic_dir: publictag_dir: tagsarchive_dir: archivescategory_dir: categoriescode_dir: downloads/codei18n_dir: :langskip_render:# Writingnew_post_name: :title.md # File name of new postsdefault_layout: posttitlecase: false # Transform title into titlecaseexternal_link:  enable: true # Open external links in new tab  field: site # Apply to the whole site  exclude: &#x27;&#x27;filename_case: 0render_drafts: falsepost_asset_folder: falserelative_link: falsefuture: truehighlight:  enable: true  line_number: true  auto_detect: false  tab_replace: &#x27;&#x27;  wrap: true  hljs: falseprismjs:  enable: false  preprocess: true  line_number: true  tab_replace: &#x27;&#x27;# Home page setting# path: Root path for your blogs index page. (default = &#x27;&#x27;)# per_page: Posts displayed per page. (0 = disable pagination)# order_by: Posts order. (Order by date descending by default)index_generator:  path: &#x27;&#x27;  per_page: 10  order_by: -date# Category &amp; Tagdefault_category: uncategorizedcategory_map:tag_map:# Metadata elements## https://developer.mozilla.org/en-US/docs/Web/HTML/Element/metameta_generator: true# Date / Time format## Hexo uses Moment.js to parse and display date## You can customize the date format as defined in## http://momentjs.com/docs/#/displaying/format/date_format: YYYY-MM-DDtime_format: HH:mm:ss## updated_option supports &#x27;mtime&#x27;, &#x27;date&#x27;, &#x27;empty&#x27;updated_option: &#x27;mtime&#x27;# Pagination## Set per_page to 0 to disable paginationper_page: 10pagination_dir: page# Include / Exclude file(s)## include:/exclude: options only apply to the &#x27;source/&#x27; folderinclude:exclude:ignore:# Extensions## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/theme: landscape# Deployment## Docs: https://hexo.io/docs/one-command-deploymentdeploy:  type: &#x27;&#x27;\n美化（可选）\n访问 https://hexo.io/themes 挑选喜爱的主题，作者一般会提供安装引导，不在此赘述。\n安装方式一般如下：\n\nnpm 安装\nGit 安装（本部署方案需要参考：安装主题导致部署后的页面空白）\n直接放入文件\n\n托管站点\n妥善保管源数据\n目前 Hexo 程序仅安装在本机，一旦文章源码等丢失，恢复工作区的成本将会是巨大的。所以在此提出的方案是将文章源码托管到 GitHub 私有仓库。\n\n在 GitHub 上建立私有仓库\n在 Hexo 根目录执行（其中 $REPOSITORY_URL 替换为你实际的私有仓库 URL）\n\ngit initgit add .git commit -m &quot;init&quot;git branch -M mastergit remote add origin $REPOSITORY_URLgit push -u origin master\n托管博客页面\n\n在 GitHub 上建立公开仓库，一般命名为 $GITHUB_USERNAME.github.io，其中 $GITHUB_USERNAME 为你的 GitHub 用户名。（如果按照本条叙述，仓库符合要求的话，GitHub Pages 默认应该是开启的）\n本地生成部署用秘钥对（其中 $YOUR_EMAIL 替换为你的 Git 邮箱，$PAGES_DEPLOY_KEY 替换为密钥文件名）\n\nssh-keygen -t rsa -C &quot;$YOUR_EMAIL&quot; -f ~/.ssh/$PAGES_DEPLOY_KEY\n\n设置页面仓库 Deploy Key （Settings -&gt; Deploy keys -&gt; Add deploy key），将 ~/.ssh/$PAGES_DEPLOY_KEY.pub（公钥）文件内容粘贴 Key 文本框并勾选下方 Allow write access 选择框（开启部署秘钥仓库写权限）\n设置源码仓库 Repository secrets （Settings -&gt; Secrets and variable -&gt; Actions -&gt; New repository secret）\n\nName 直接填写 DEPLOY_PRIVATE_KEY\nSecret 填写 ~/.ssh/$PAGES_DEPLOY_KEY（私钥）文件内容\n\n\n编写源码仓库 GitHub Actions 自动化流水线脚本\n\n在源码仓库中的 .github/workflows 目录中新建文件 CI.yml 填写如下内容：\n\n\n\nname: CIon:  push:jobs:  hexo-deployment:    runs-on: ubuntu-latest    steps:    - name: Checkout source      uses: actions/checkout@v3      with:        fetch-depth: 0    - name: Restore file modification time      run: find source -name &#x27;*.md&#x27; | while read file; do touch -d &quot;$(git log -1 --format=&quot;@%ct&quot; &quot;$file&quot;)&quot; &quot;$file&quot;; done    - name: Setup Node.js      uses: actions/setup-node@v3      with:        node-version: 18    - name: Get npm cache directory      id: npm-cache-dir      shell: bash      run: echo &quot;dir=$(npm config get cache)&quot; &gt;&gt; $&#123;GITHUB_OUTPUT&#125;    - uses: actions/cache@v3      id: npm-cache # use this to check for `cache-hit` ==&gt; if: steps.npm-cache.outputs.cache-hit != &#x27;true&#x27;      with:        path: $&#123;&#123; steps.npm-cache-dir.outputs.dir &#125;&#125;        key: $&#123;&#123; runner.os &#125;&#125;-node-$&#123;&#123; hashFiles(&#x27;**/package-lock.json&#x27;) &#125;&#125;        restore-keys: |          $&#123;&#123; runner.os &#125;&#125;-node-    - name: Install dependencies &amp; Generate static files      run: |        node -v        npm i -g hexo-cli        npm i        hexo clean        hexo g    - name: Upload assets to GitHub Action      uses: actions/upload-artifact@v3      with:        path: public    - name: Deploy to GitHub      uses: s0/git-publish-subdir-action@v2.6.0      env:        BRANCH: master        # CLEAR_GLOBS_FILE: &#x27;.clear-target-files&#x27;        FOLDER: public        MESSAGE: &#x27;[Blog#&#123;sha&#125;]&#123;msg&#125;&#x27;        # 这一行填写你页面仓库的 git 地址        REPO: git@github.com:someone/some-repo.git        SSH_PRIVATE_KEY: $&#123;&#123; secrets.DEPLOY_PRIVATE_KEY &#125;&#125;\n注：GitHub Actions 针对公开仓库提供无限制的运行时间。GitHub Actions 针对私有仓库提供 2000 分钟/月运行时间（Pro 计划为 3000 分钟/月）只是写写博客免费计划绰绰有余。\n后记\n有关 HTTPS 问题。\n如果使用 GitHub Pages 域名，即 xxx.github.io，则默认启用 HTTPS。\n如果使用别名（即自己的 CNAME 解析）且带 CDN 加速服务需要注意，这里以 CloudFlare 为例，在面板中配置 CNAME 后，请暂时不要启用 CloudFlare 提供的代理服务，先回到 GitHub Pages 配置页面，等待 Enforce HTTPS 选择框亮起并勾选（如果开启了 CloudFlare 邮件通知，则会收到证书透明度邮件）后，再启用 CDN 代理。\n虽然 GitHub Pages 中不开启强制 HTTPS 连接直接启用 CDN 在访问博客时同样提示为 HTTPS 安全连接，但事实上这个 HTTPS 形同虚设：\n客户端（浏览器） &lt;— HTTPS —&gt; CDN &lt;— HTTP —&gt; 服务端（GitHub Pages）\n而边缘证书成功申请后 HTTPS 才是真正有效的：\n客户端（浏览器） &lt;— HTTPS —&gt; CDN &lt;— HTTPS —&gt; 服务端（GitHub Pages）\n此问题的原始链接：https://gist.github.com/zbeekman/ac6eeb41ea7980f410959b13416d74c9\n安装主题导致部署后的页面空白\n通过 Git 安装的主题需要创建子模块（submodule）来嵌入源码仓库：\n如果已经安装主题，请移除 themes/$YOUR_THEME，其中 $YOUR_THEME 为你的主题目录名。按如下例子修改命令，重新安装主题（以 NexT 主题为例）：\n- git clone https://github.com/next-theme/hexo-theme-next themes/next+ git submodule add https://github.com/next-theme/hexo-theme-next themes/next\n首先应当注意到新的 .gitmodules 文件。 该配置文件保存了项目 URL 与已经拉取的本地目录之间的映射：\n[submodule &quot;themes/next&quot;]\tpath = themes/next\turl = git@github.com:next-theme/hexo-theme-next.git\n如果有多个子模块，该文件中就会有多条记录。 要重点注意的是，该文件也像 .gitignore 文件一样受到（通过）版本控制。 它会和该项目的其他部分一同被拉取推送。 这就是克隆该项目的人知道去哪获得子模块的原因。\n然后需要修改 .github/workflows/CI.tml 文件：\n    steps:    - name: Checkout source      uses: actions/checkout@v3      with:+       submodules: recursive        fetch-depth: 0          - name: Restore file modification time      run: find source -name &#x27;*.md&#x27; | while read file; do touch -d &quot;$(git log -1 --format=&quot;@%ct&quot; &quot;$file&quot;)&quot; &quot;$file&quot;; done\n这么做是让 GitHub Actions 在运行 checkout 工作流时，将子模块一同拉取，保证主题也正常被拉取到工作坏境中。\n一切完成后还需要将执行下述命令来将本地修改推送到远端仓库：\ngit add .git commit -m &quot;Fix theme submodule&quot;git push\n","tags":["hexo"]},{"title":"CloudFlare 封号事件","url":"/2024/06/29/3.cloud-flare-blocking-incident/","content":"\n        \n          2024\n\n        \n      \n        \n          06.03\n\n        \n        序章\n邮件警告\n从 2024 年 6 月 3 日 0 时 47 分开始，陆续收到了来自 CloudFlare 的邮件。看起来是这样的：\n\n大致是在说：CloudFlare 接到了来自 netcraft 的报告，匿名报告者称下述路径涉嫌钓鱼网站\nhttps://gh-proxy.hendrixshen.top/login\nhttps://gh-proxy.hendrixshen.top/session\nhttps://gh-proxy.hendrixshen.top/about.php\nhttps://gh-proxy.hendrixshen.top/about.php7\nhttps://gh-proxy.hendrixshen.top/index.html\nhttps://gh-proxy.hendrixshen.top/search/custom_scopes\n其中 https://gh-proxy.hendrixshen.top/login 被认定是网络钓鱼。\n\n后续分别在 2024/6/3 1:13、2024/6/3 2:48、2024/6/3 21:18、2024/6/3 21:18 接到四封类似邮件，内容都是一个模板就不放图了。\n访问被阻止的站点看起来是这样的：\n\n\n      \n        \n          06.04\n\n        \n        暂停帐户\n\n“可能违反服务条款”、“不会影响、禁用或删除您当前的服务”\n\n全域封锁\n这个全域封锁右侧的“请求审查”按钮是点不动的，而且全域封锁是针对帐户的，所以同属这个帐户管理的域名全部被全域分所\n\n\n尝试同信任与安全团队联系\n\n原文如下（已修正错别字）：\n我注意到 https://gh-proxy.hendrixshen.top/login 被报告涉嫌钓鱼网站\n事实上， 整个 gh-proxy.hendrixshen.top/* 都是使用 CloudFlare Workers 对 github.com 进行代理的，其中 GitHub 的 登录 功能是不可用的，此过程中只对请求进行重定向，不涉及到任何存储功能。\n暂停账户及链接封锁已经对我造成了严重的影响，我希望 CloudFlare 能够加快审查速度，并给出合理的解释。\n\n\n      \n        \n          06.06\n\n        \n        支持平台提交工单\n\n原文如下：\n我的帐户被暂停，已经联系支持与信任部门，但未得到任何回复，我想得到关于审查进度信息\n\n回复如下（机器翻译）：\n您好：\n感谢您联系 Cloudflare 技术支持。\n我们已将此请求升级到我们的信任和安全团队进行审查。信任和安全团队将很快与您联系，并帮助解决您的请求。\n请注意，您向技术支持部门提出的请求已关闭，因为我们的信任和安全团队需要直接跟进。\n如果您需要任何其他技术支持帮助，请按照我们支持门户网站上的说明进行操作。\n此工单现在将标记为已关闭。\nSufi | Cloudflare 支持\n登录以加入 Cloudflare 社区，获取建议和见解。\n\n在工单被回复前还有个小插曲：先交钱再说\n\n\n      \n        \n          06.07\n\n        \n        非全域封锁解除\n其它几条审核日志与此类似就不放图了。本以为全域封锁也会陆续解除，但这就结束了？\n\n\n      \n        \n          06.08\n\n        \n        对线\n再次提交工单\n\n原文如下（已修正错别字）：\n两天前我提交了有关帐户被暂停的情况询问请求，你们回复信任与安全团队会与我联系，并解决该问题。然而两天过去了，我没有得到任何回复，没有任何人联系我，包括我四天前主动通过邮件向信任与安全团队，也没有得到任何回复。我不能理解你们处理问题的态度，也看不到你们解决问题的诚意，如果你们持续保持沉默，我将转向其它平台不再使用 CloudFlare。\n\n回复如下（机器翻译）：\n您好：\n感谢您联系 Cloudflare 账单支持，并感谢您在我们的排队时间高于正常水平时的耐心等待。我们的信任与安全团队确实在排队处理您的 ▓▓▓▓ 号工单，但由于排队人数高于正常水平，这些工单将按照收到的顺序进行回复，因此可能需要比预期更长的时间。\n请注意，我无法提供信任与安全团队直接与您跟进的预计时间，但他们需要这样做，因为我们的团队无法了解他们的排队情况。我们希望您不要发送重复的回复，或制作重复的工单，因为这将延迟我们的回复。\n此单可视为已关闭，但如果您有任何账单查询，请提交新工单寻求帮助。\n谨致问候，\nBex | Cloudflare 账单专家\n登录以加入 Cloudflare 社区，获取建议和见解。\n\n来自信任与安全团队的第一次回应\n\n回复如下（机器翻译）：\n该账户违反了 Cloudflare 的服务条款。特别是网络钓鱼。\n请提供详细解释，说明该账户为何存在恶意活动，您采取了哪些措施进行纠正，以及您将采取哪些措施确保此类情况不再发生。一旦有了这些信息，我们就可以重新评估该账户的状态。\n谨致问候，\nCloudflare 信任与安全\n\n第一次回怼\n\n回复如下（机器翻译）：\n我再说一遍，我没有进行网络钓鱼。第一个被标记为网络钓鱼的网站是使用 CloudFlare Worker 的 GitHub 代理。代理的 GitHub 登录页面假定我在进行网络钓鱼，但事实上该 Worker 没有任何存储空间。我现在已经删除了指向该 Worker 的路由。但我并没有删除 Worker，也没有修改它的代码以便你们进行调查。我不会为我没做过的事情做任何承诺。我认为这是一份虚假报告，希望你们能尽快做出回应。\n\n\n      \n        \n          06.10\n\n        \n        迷惑操作\n\n回复如下（机器翻译）：\n您好:\n您可能已经收到了来自 Cloudflare 的多份通知，其中包含滥用报告人的信息。我们建议您与滥用报告者解决此事。如果他们撤销了对您网站的评估，请向我们提供他们的回复以供审查。\n\n再次回怼\n\n回复如下（机器翻译）：\n你自己看过报告了吗？报告明确指出问题已经解决。你们处理此事的效率之低令人难以置信，一次来回沟通就花了好几天时间。我想问一下，谁应该为浪费的时间买单？\n\n\n      \n        \n          06.18\n\n        \n        投诉工单\n\n原文如下：\n事情从 netcraft 报告我的域名涉嫌网络钓鱼开始，netcraft 报告了几个可能的 URL，被你们封禁。后来你们在邮件通知我的帐户被暂停，提及不会影像服务，但事实上你们屏蔽了帐户下与此事件无关的其他域名。所谓的 “请求审查” 按钮也是不可用的状态。目前“信任与安全”部门已经长达一周没有回复任何信息，我不知道你们还是否在跟进这件事，还是说像丢垃圾一样弃之一旁。你们“安全与信任”部门，给我回复了一篇 netcraft 的报告，让我先解决报告中提及问题，但事实上这篇报告早就被标记为已解决，你们甚至没有自己审查过这篇报告就把责任丢给我。我想问如果你们部门的做法存在问题，难道要让用户承担后果吗？\n\n回复如下（机器翻译）：\n您好：\n感谢您联系 Cloudflare 技术支持。\n我们已将此请求升级到我们的信任和安全团队进行审查。信任和安全团队将很快与您联系，并帮助解决您的请求。\n请注意，您向技术支持部门提出的请求已关闭，因为我们的信任和安全团队需要直接跟进。\n如果您需要任何其他技术支持帮助，请按照我们支持门户网站上的说明进行操作。\n此工单现在将标记为已关闭。\nJoe | Cloudflare 支持\n登录以加入 Cloudflare 社区，获取建议和见解。\n\n\n      \n        \n          06.21\n\n        \n        也许是不死心\n\n回复如下（机器翻译）：\n距离我上次回复邮件已经快两周了，你们仍然没有回复任何信息，难道你们不想解决这个问题了吗？\n\n\n      \n        \n          06.22\n\n        \n        再次拉扯\n\n信任安全团队仍然没有任何回应，此问题已经持续将近20天，我已经从 cloudflare 删除了与本次事件无关但被阻止的域名。我希望审查结束后，将这两个域名一并解除封禁。同时，你们消极的态度我需要你们作出明确的解释，我认为你们根本不在乎免费计划的用户，请给我一个继续使用 cloudflare 的理由。如果你们最终不能解决这个问题，我将会考虑使用其他平台，同时不可能再推荐其他人使用 cloudflare！你们总是说信任安全团队会尽快与我联系，但是我没有得到任何信息。排队时间已经快到两周了，我希望得到一个合理的解释。我也想知道信任安全团队不回复任何信息，作为用户该怎么办？\n\n回复如下（机器翻译）：\n您好：\n感谢您联系 Cloudflare 技术支持。\n我们已将此请求升级到我们的信任和安全团队进行审查。信任和安全团队将很快与您联系，并帮助解决您的请求。\n请注意，您向技术支持部门提出的请求已关闭，因为我们的信任和安全团队需要直接跟进。\n如果您需要任何其他技术支持帮助，请按照我们支持门户网站上的说明进行操作。\n此工单现在将标记为已关闭。\n谨致问候，\nEmily M\n技术支持工程师 - Cloudflare\n登录以加入 Cloudflare 社区，获取建议和见解。\n\n原文如下：\n你们的信任与安全团队根本不给予任何回复，每一次诉求都石沉大海，你们总是直接将议题关闭，但是没有任何实质性的进展。\n\n回复如下（机器翻译）：\n您好、\n我们已将此请求上报至我们的信任与安全团队。目前该请求正在审核中，信任与安全团队将尽快与您联系，并帮助解决您的请求。请注意，我们的支持团队无法帮助您解决这一问题，也无法加快处理速度。请耐心等待信任与安全团队的回复。\n谨致问候，\nEmily M\n技术支持工程师 - Cloudflare\n登录以加入 Cloudflare 社区，获取建议和见解。\n\n\n      \n        \n          06.28\n\n        \n        终局\n解决了？\n\n回复如下（机器翻译）：\n请求 ▓▓▓▓、▓▓▓▓ 已关闭并合并到此请求中。\n\n\n回复如下（机器翻译）：\n您好：\n我们已经解除了限制。请注意，如果我们发现您有任何违规行为，您的账户可能会在未经通知的情况下再次被暂停。\n\n只是要个破账号有什么用？\n\n回复如下（机器翻译）：\n我的域名仍然受到限制，包括现有域名和我添加过的域名：hendrixshen.top、▓▓▓▓ 和 ▓▓▓▓。既然问题已经解决，为什么不取消限制呢？\n\n解决了？？\n\n回复如下（机器翻译）：\n您好：\n现已更正。\n\n你要不要看看你在说什么？\n\n回复如下（机器翻译）：\n你要不要看看你在说什么吗？我的域名还是不工作。\n\n\n      \n        \n          06.29\n\n        \n        真的解决了！\n\n回复如下（机器翻译）：\n您好：\n谢谢您的说明 - 现在应该可以更正了。\n\n\n      \n"}]